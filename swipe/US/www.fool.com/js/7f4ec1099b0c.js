jQuery(document).ready(function(){var ImageFallback=Stapes.subclass({constructor:function(selector,postLoadingSelector){console.log('Fool.Util.ImageFallback -- starting up...');if(selector===undefined){selector='img[data-placeholder-img-src]';}
this.setListeners(selector);if(postLoadingSelector===undefined){postLoadingSelector='img[data-img-src]';}
this.replaceImages(postLoadingSelector);},replaceImages:function(selector){jQuery(selector).each(function(idx,el){var img=$('<img/>').attr('src',jQuery(el).data('imgSrc')).attr('class',el.className).attr('alt',jQuery(el).attr('alt')).load(function(){if(!this.complete||typeof this.naturalWidth=='undefined'||this.naturalWidth==0){}else{jQuery(el).replaceWith(this);}});});},setListeners:function(selector){jQuery(selector).error(function(ev){var el=ev.target;el.src=jQuery(el).data('placeholderImgSrc');});}});window.Fool.Util.extend({'ImageFallback':new ImageFallback()});});;(function($,window,document,undefined){var pluginName="foolSearch",defaults={maxResults:10};function FoolSearch(element,options){this.element=element;this.$element=$(element);this.options=$.extend({},defaults,options);this.init();}
FoolSearch.prototype={init:function(){this.$resultsEl=$('<div class="ticker-input-results" role="list" aria-hidden="true"></div>');this.$resultsEl.hide();this.$resultsEl.insertAfter(this.element);this.keysBound=false;var _this=this;this.$resultsEl.on('mouseover','.ticker-input-results-result',function(e){_this.handleMouseOver.call(_this,e);});this.$resultsEl.on('click','.ticker-input-results-result',function(e){_this.submitEl($(e.target).closest('.ticker-input-results-result'))});$(this.element).on('focus',function(){if(!_this.keysBound){_this.attachKeyListeners.call(_this);_this.keysBound=true;}
if(!_this.resultsShowing()){$(_this.element).val('');}});$(this.element).on('blur',function(){_this.disposeKeyListeners.call(_this);_this.keysBound=false;});$(document).on('click',function(e){if($(e.target).closest('.ticker-input-results').length===0&&e.target!==_this.element){_this.hideResults();_this.disposeKeyListeners();}});this.premiumId=null;var page_type=window.location.pathname.match(/^(.*)\/((19|20)\d\d[\/.](0[1-9]|1[012])[\/.](0[1-9]|[12][0-9]|3[01]))\/(.*)$/);if(!page_type)
{var matches=window.location.pathname.match(/^(.*)\/(\d*)\/(.*)$/);if(matches){this.premiumId=matches[2];}}},resultsShowing:function(){return this.$resultsEl.attr("aria-hidden")==="false";},attachKeyListeners:function(){var _this=this,$el=$(this.element);$el.on('propertychange input',function(){_this.handleInputChange.call(_this,$el.val());});$el.on('keydown',function(e){_this.handleKeyDown.call(_this,e)});},disposeKeyListeners:function(){var $el=$(this.element);$el.off('input');$el.off('keydown');},handleInputChange:function(q){if(q==""){this.hideResults();return;}
var _this=this;$.ajax({url:"https://www.fool.com/a/quotes/v3/instruments/search/",jsonp:"callback",dataType:"jsonp",data:{maxResults:this.options.maxResults,apiKey:"public",domain:"fool.com",query:q},success:function(response){if(response&&response.ResultsFound){_this.showResults(response.SearchResults);}else{_this.hideResults();}}});},handleKeyDown:function(e){switch(e.which){case 13:this.submit();break;case 27:this.hideResults();break;case 37:case 38:if(this.resultsShowing()){this.moveSelectionUp();}
break;case 39:case 40:if(this.resultsShowing()){this.moveSelectionDown();}
break;case 9:this.hideResults();return;default:return;}
e.preventDefault();},handleMouseOver:function(e){var $target=$(e.target);$target.siblings('.active').removeClass('active');$target.addClass('active');},moveSelectionUp:function(){var $activeEl=this.$resultsEl.find(".active");if($activeEl.length<=0)return;var $prevEl=$activeEl.prev(".ticker-input-results-result");if($prevEl.length<=0){$prevEl=this.$resultsEl.find("div.ticker-input-results-result:last-child");}
$prevEl.addClass("active");$activeEl.removeClass("active");},moveSelectionDown:function(){var $activeEl=this.$resultsEl.find(".active");if($activeEl.length<=0)return;var $nextEl=$activeEl.next(".ticker-input-results-result");if($nextEl.length<=0){$nextEl=this.$resultsEl.find("div.ticker-input-results-result:first-child");}
$nextEl.addClass("active");$activeEl.removeClass("active");},showResults:function(results){var items='';for(var i=0;i<results.length;i++){var r=results[i];items+='<div class="ticker-input-results-result'+(i==0?' active':'')+'" role="listitem" aria-valuetext="'+r.Name+'" aria-hidden="false" data-instrument-id='+r.InstrumentId+'>'+'<span>'+'<span class="ticker-input-results-symbol">'+r.Symbol+'</span>'+'<span class="ticker-input-results-company">'+r.Name+'</span>'+'<span class="ticker-input-results-exchange exchange-'+r.Exchange+'">'+r.Exchange+'</span>'+'</span>'+'</div>';}
this.$resultsEl.html(items);this.$resultsEl.show();this.$resultsEl.attr("aria-hidden","false");},hideResults:function(){this.$resultsEl.hide();this.$resultsEl.attr("aria-hidden","true");this.$resultsEl.html('');},submit:function(){this.submitEl(this.$resultsEl.find(".active"));},submitEl:function(el){this.defaultAction(el,this);},defaultAction:function(el,search){if(el.length>0){var symbol=el.find(".ticker-input-results-symbol").text();var exchange=el.find(".ticker-input-results-exchange").text();var instrumentId=el.data('instrumentId');$(this.element).val(exchange+":"+symbol);var quoteUrl="https://www.fool.com/quote/";if(this.premiumId){quoteUrl+=this.premiumId+'/';}
window.location.href=quoteUrl+instrumentId;}else{if(this.premiumId){window.location.href="https://www.fool.com/search/ "+premiumId+"/solr.aspx?q="+$(this.element).val();}
else{window.location.href="https://www.fool.com/search/solr.aspx?q="+$(this.element).val();}}}};$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){var searchPlugin=new FoolSearch(this,options);if(options&&options.defaultAction){searchPlugin.defaultAction=options.defaultAction;}
$.data(this,"plugin_"+pluginName,searchPlugin);}});};})(jQuery,window,document);$(document).ready(function(){$('.ticker-input-input').foolSearch();});;(function($){function SingleTabNav(element,options){var defaults={tabSelector:"> ul > li > a"};this.element=element;this.$element=$(element);this.options=$.extend({},defaults,options);this.indexAttribute="data-pos-index";this.init();}
SingleTabNav.prototype={init:function(){var self=this;var keyActions=new KeyActions(this.$element);var tabbableSelector=this.$element.attr("data-tabbable-selector")||this.options["tabSelector"];this.$allTabbable=this.$element.find(tabbableSelector+":visible");this.$allTabbable.each(function(i,element){$(element).attr(self.indexAttribute,i);});this.focusIndex=0;this.tabbableCount=this.$allTabbable.length;this.$firstTabbable=$(this.$allTabbable[0]);this.$firstTabbable.attr("tabindex",0);this.$forcedTabbable=this.$allTabbable.filter(function(index){return index!==0;});this.$forcedTabbable.attr("tabindex",-1);this.$allTabbable.on("focus",function(){var $element=$(this);self.focusIndex=parseInt($element.attr(self.indexAttribute));self.$allTabbable.attr("aria-selected",false);$element.attr("aria-selected",true);});this.$allTabbable.on("blur",function(){$(this).attr("aria-selected",false);});keyActions.addKey("left",function(){self.focusIndex--;self.setFocusOnCurrentIndex();return false;});keyActions.addKey("right",function(){self.focusIndex++;self.setFocusOnCurrentIndex();return false;});this.$element.bind('keydown',function(event){var code=event.keyCode;event.stopPropagation();return keyActions.fireKey(code);});},setFocusOnCurrentIndex:function(){var focusElement;if(this.tabbableCount<=this.focusIndex){this.focusIndex=0;}
if(this.focusIndex<0){this.focusIndex=this.tabbableCount-1;}
if(this.focusIndex===0){focusElement=this.$firstTabbable;}
else{focusElement=$(this.$forcedTabbable.get(this.focusIndex-1));}
focusElement.focus();}}
$.fn["singleTabNav"]=function(options){return this.each(function(){if(!$.data(this,"singleTabNav")){var singleTabNav=new SingleTabNav(this,options);$.data(this,"singleTabNav",singleTabNav);}});};function KeyActionDropDown(element,options){var defaults={};this.element=element;this.$element=$(element);this.options=$.extend({},defaults,options);this.init();}
KeyActionDropDown.prototype={init:function(){var self=this;var keyActions=new KeyActions(this.$element);this.listContainer=this.$element.find('ul');this.listElements=this.listContainer.find('li a');this.isExpanded=false;this.focusIndex=0;this.listContainer.attr('role','listbox');this.listContainer.attr('aria-expanded',false);this.listElements.attr('role','option')
this.$element.find('a').attr("tabindex",-2);function setFocusOnCurrentIndex(){var focusedElement;if(self.listElements.length<=self.focusIndex){self.focusIndex=0;}
if(self.focusIndex<0){self.focusIndex=self.listElements.length-1;}
self.listElements.attr("aria-selected",false);focusedElement=$(self.listElements.get(self.focusIndex));focusedElement.attr("aria-selected",true);focusedElement.focus();}
function focusTop(){self.$element.focus();}
function closeDropDown(){if(self.isExpanded){self.listContainer.attr('aria-expanded',false);self.listContainer.removeClass('expanded');self.isExpanded=false;self.focusIndex=0;}}
function toggleDropDown(){self.listContainer.attr('aria-expanded',false);self.listContainer.toggleClass('expanded');self.isExpanded=!self.isExpanded;if(self.isExpanded){self.listContainer.attr('aria-expanded',true);self.focusIndex=0;setFocusOnCurrentIndex();}
else{focusTop();}}
$('body').on("click",function(){closeDropDown();});this.$element.bind('click',function(event){event.stopPropagation();toggleDropDown();});keyActions.addKey("enter",function(event){var focusedElement;if(self.isExpanded){focusedElement=self.listElements.get(self.focusIndex);if(focusedElement){focusedElement.click();}
closeDropDown();}
else{toggleDropDown();}});keyActions.addKey("up",function(){if(self.isExpanded){self.focusIndex--;setFocusOnCurrentIndex();return false;}
return true;});keyActions.addKey("down",function(){if(self.isExpanded){self.focusIndex++;setFocusOnCurrentIndex();return false;}
return true;});keyActions.addKey("left",function(){if(self.isExpanded){closeDropDown();}
return true;});keyActions.addKey("right",function(){if(self.isExpanded){closeDropDown();}
return true;});keyActions.addKey("escape",function(){if(self.isExpanded){closeDropDown();focusTop();return false;}
return true;});keyActions.addKey("tab",function(){if(self.isExpanded){closeDropDown();}
return true;});this.$element.bind('keydown',function(event){var code=event.keyCode;return keyActions.fireKey(code);});}}
$.fn["keyActionDropDown"]=function(options){return this.each(function(){if(!$.data(this,"keyActionDropDown")){var keyActionDropDown=new KeyActionDropDown(this,options);$.data(this,"keyActionDropDown",keyActionDropDown);}});};function KeyActions($element){var keyStringMap={"tab":9,"left":37,"right":39,"down":40,"up":38,"enter":13,"escape":27,"backspace":8}
this.$element=$element;this.keyActions=[];function getCodeFromString(codeName){return keyStringMap[codeName];}
KeyActions.prototype.addKey=function(strOrCode,fn){var code=typeof strOrCode==="number"?strOrCode:getCodeFromString(strOrCode);var keyAction={key:code,action:fn};this.keyActions.push(keyAction);}
KeyActions.prototype.fireKey=function(code){var exitCode=true;this.keyActions.forEach(function(keyAction){if(keyAction.key!==code){return;}
exitCode=keyAction.action();});return exitCode;}}})(jQuery);$(document).ready(function(){$('.js-single-tab-nav, #main-menu-nav, .top-nav, .main-container').singleTabNav();$('.fool-tophat').singleTabNav();$('ul.dropMenu').keyActionDropDown();$('.navigation-menu.show').singleTabNav({tabSelector:'li.nav-link'});$('#js-navigation-menu li.nav-link').keyActionDropDown();});jQuery(document).ready(function(){var Tophat=Stapes.subclass({constructor:function(){console.log('Fool.Tophat -- starting up...');rivets.adapters[':']={subscribe:function(obj,keypath,callback){obj.on('change:'+keypath,callback)},unsubscribe:function(obj,keypath,callback){obj.off('change:'+keypath,callback)},read:function(obj,keypath){return obj.get(keypath)},publish:function(obj,keypath,value){obj.set(keypath,value)}};jQuery('#logOut a').on('click',function(){window.kizzy.clear();return true;});Stapes.on('fool:user:user_info.ready',jQuery.proxy(function(data,eventObject){var user=data['user'];var accessibleServices=_.reject(data['services']['accessible'],function(service){return service['product_id']==0;});var accessibleServices=_.map(accessibleServices,function(svc){var new_svc=svc;new_svc.button_class_name='gradient btn-'+svc.product_id;return new_svc;});var inaccessibleServices=data['services']['inaccessible'];var hasAccessibleServices=accessibleServices.length>0;var noInaccessibleServices=inaccessibleServices.length<1;var canAccessFoolOne=_.some(accessibleServices,function(svc){return svc['product_id']=1255;});var isLoggedIn=user?true:false;var view;try{view=rivets.bind(jQuery('#userTools'),{'user':data['user'],'hasAccessibleServices':hasAccessibleServices,'noInaccessibleServices':noInaccessibleServices,'accessibleServices':accessibleServices,'inaccessibleServices':inaccessibleServices,'canAccessFoolOne':canAccessFoolOne,'isLoggedIn':isLoggedIn});}
catch(e){}},this));}});window.Fool.extend({'Tophat':new Tophat()});});(function(){var sideMenuToggleFunction=function(e){e.preventDefault();var data=$(this).data();$('body').toggleClass(data.classToToggle);};var discloseToggleFunction=function(e){e.preventDefault();$(this).closest('.js-disclose').toggleClass('open');};var openNextMenuClicked=function(e){e.preventDefault();var currentMenuSection=$(this).closest('.js-top-menu-section');var data=$(e.delegateTarget).data();var nextMenuSection=$(data.nextMenu);currentMenuSection.hide();nextMenuSection.show();};var openPreviousMenuClicked=function(e){e.preventDefault();var currentMenuSection=$(this).closest('.js-top-menu-section');var data=$(currentMenuSection).data();var previousMenuSection=$(data.previousMenu);currentMenuSection.hide();previousMenuSection.show();};$('.js-disclose-toggle').click(discloseToggleFunction);$('html.no-touch .js-side-menu-toggle, html.no-touch .js-menu-toggle').click(sideMenuToggleFunction);$('html.touch .js-side-menu-toggle, html.touch .js-menu-toggle').on('touchstart',sideMenuToggleFunction);$('html.no-touch .js-open-next-menu').click(openNextMenuClicked);$('html.touch .js-open-next-menu').on('touchstart',openNextMenuClicked);$('html.no-touch .js-open-previous-menu').click(openPreviousMenuClicked);$('html.touch .js-open-previous-menu').on('touchstart',openPreviousMenuClicked);})();var draggableSideMenu=function(selectorToMove,gripSelector){var selector=selectorToMove;var maxX=284;var threshold=50;var offset;var startMargin;var getMarginValue=function(){var right=$(selector).css('margin-right');return parseInt(right,10);};var touchstart=function(e){e.preventDefault();var orig=e.originalEvent;var menuOffset=$(selector).offset();var gripOffset=$(gripSelector).offset();var offsetDiff=menuOffset.left-gripOffset.left;offset={x:orig.changedTouches[0].pageX-menuOffset.left+offsetDiff,y:orig.changedTouches[0].pageY-menuOffset.top};startMargin=getMarginValue();};var touchmove=function(e){var orig=e.originalEvent;var x=orig.changedTouches[0].pageX-offset.x;var cssVal='-'+x+'px';$(selector).css({'margin-right':cssVal});};var touchend=function(e){var orig=e.originalEvent;var marginValue=getMarginValue();var marginDiff=startMargin-marginValue;var absMarginDiff=Math.abs(marginDiff);if(absMarginDiff<10){toggleOpenClosed();return;}
if(absMarginDiff<threshold){if(startMargin===0){animateToOpenState();}else{animateToClosedState();}}else{if(startMargin===0){animateToClosedState();}else{animateToOpenState();}}};var toggleOpenClosed=function(){var marginValue=getMarginValue();var absMargin=Math.abs(marginValue);if(absMargin==maxX){animateToOpenState();}else{animateToClosedState();}};var animateToOpenState=function(){animateTo(0);};var animateToClosedState=function(){animateTo(-maxX);};var animateTo=function(x){if(x===-0){x=0;}
var cssVal=''+x+'px';$(selector).animate({'margin-right':cssVal},250);};$(document.body).on("touchstart",gripSelector,touchstart);$(document.body).on("touchmove",gripSelector,touchmove);$(document.body).on("touchend",gripSelector,touchend);return{animateOpen:animateToOpenState,animateClosed:animateToClosedState};};(function(){mainMenuBtn=$("#menu-btn");navMobile=$("#nav-mobile");listMobile=$("#list-mobile");openSearchButton=$("#search-button");searchBox=$("#search");function closeMenu(){navMobile.removeClass('show');mainMenuBtn.removeClass('open');}
function closeSearch(){openSearchButton.removeClass('open');searchBox.removeClass('show');}
mainMenuBtn.on('click',function(){navMobile.toggleClass('show');mainMenuBtn.toggleClass('open');closeSearch();});openSearchButton.on('click',function(){openSearchButton.toggleClass('open');searchBox.toggleClass('show');closeMenu();});$(document.body).on('click',function(eventArg){if($(eventArg.target).parents('#search, #search-button').length>0||$(eventArg.target).is('#search, #search-button')){return;}
openSearchButton.removeClass('open');searchBox.removeClass('show');});navMobile.on('click','li.sub:not(.current)',function(eventArg){var listItem=$(eventArg.target).parents('li.sub');listItem.addClass('current');listMobile.addClass('sub-menu-open');eventArg.preventDefault();});navMobile.on('click','.title',function(){$('li.sub.current').removeClass('current');listMobile.removeClass('sub-menu-open');});})();$('.js-accordion-trigger').bind('click',function(e){jQuery(this).parent().find('.submenu').slideToggle('fast');jQuery(this).parent().toggleClass('is-expanded');e.preventDefault();});$(document).ready(function(){$('.accordion-tabs').each(function(index){$(this).children('li').first().children('a').addClass('is-active').next().addClass('is-open').show();});$('.accordion-tabs').on('click','> li > a',function(event){if(!$(this).hasClass('is-active')){event.preventDefault();var accordionTabs=$(this).closest('.accordion-tabs');accordionTabs.find('.is-open').removeClass('is-open').hide();$(this).next().toggleClass('is-open').toggle();accordionTabs.find('.is-active').removeClass('is-active');$(this).addClass('is-active');}else{event.preventDefault();}});});$(document).ready(function(){$(".dropdown-button").click(function(){$(".menu").toggleClass("show-menu");$(".menu > li").click(function(){$(".dropdown-button").html($(this).html());$(".menu").removeClass("show-menu");});});});$(document).ready(function(){var expanderTrigger=document.getElementById("js-expander-trigger");var expanderContent=document.getElementById("js-expander-content");$('#js-expander-trigger').click(function(){$(this).toggleClass("expander-hidden");});});var Filter=(function(){function Filter(element){this._element=$(element);this._optionsContainer=this._element.find(this.constructor.optionsContainerSelector);}
Filter.selector='.filter';Filter.optionsContainerSelector='> div';Filter.hideOptionsClass='hide-options';Filter.enhance=function(){var klass=this;return $(klass.selector).each(function(){return new klass(this).enhance();});};Filter.prototype.enhance=function(){this._buildUI();this._bindEvents();};Filter.prototype._buildUI=function(){this._summaryElement=$('<label></label>').addClass('summary').attr('data-role','summary').prependTo(this._optionsContainer);this._clearSelectionButton=$('<button></button>').text('Clear').attr('type','button').insertAfter(this._summaryElement);this._optionsContainer.addClass(this.constructor.hideOptionsClass);this._updateSummary();};Filter.prototype._bindEvents=function(){var self=this;this._summaryElement.click(function(){self._toggleOptions();});this._clearSelectionButton.click(function(){self._clearSelection();});this._checkboxes().change(function(){self._updateSummary();});$('body').click(function(e){var inFilter=$(e.target).closest(self.constructor.selector).length>0;if(!inFilter){self._allOptionsContainers().addClass(self.constructor.hideOptionsClass);}});};Filter.prototype._toggleOptions=function(){this._allOptionsContainers().not(this._optionsContainer).addClass(this.constructor.hideOptionsClass);this._optionsContainer.toggleClass(this.constructor.hideOptionsClass);};Filter.prototype._updateSummary=function(){var summary='All';var checked=this._checkboxes().filter(':checked');if(checked.length>0){summary=this._labelsFor(checked).join(', ');}
this._summaryElement.text(summary);};Filter.prototype._clearSelection=function(){this._checkboxes().each(function(){$(this).prop('checked',false);});this._updateSummary();};Filter.prototype._checkboxes=function(){return this._element.find(':checkbox');};Filter.prototype._labelsFor=function(inputs){return inputs.map(function(){var id=$(this).attr('id');return $("label[for='"+id+"']").text();}).get();};Filter.prototype._allOptionsContainers=function(){return $(this.constructor.selector+" "+this.constructor.optionsContainerSelector);};return Filter;})();$(function(){Filter.enhance();});$(document).ready(function(){var menuToggle=$('#js-mobile-menu').unbind();$('#js-navigation-menu').removeClass("show");menuToggle.on('click',function(e){e.preventDefault();$('#js-navigation-menu').slideToggle(function(){if($('#js-navigation-menu').is(':hidden')){$('#js-navigation-menu').removeAttr('style');}});});});