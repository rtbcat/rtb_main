!function($,window,document,undefined){var $window=$(window);$.fn.lazyload=function(options){function checkMobile(){var mobileWidth=null;return viewPort<=settings.mobile_breakpoint&&(mobileWidth="m"),mobileWidth}function checkDesktop(){var desktopWidth=null;return viewPort<=settings.desktop_breakpoint&&viewPort>settings.miniTablet_breakpoint&&(desktopWidth="d"),desktopWidth}function checkRetina(){var retinaValue=null;return"devicePixelRatio"in window&&window.devicePixelRatio>1&&(retinaValue="2x"),retinaValue}function isDisable(element){return settings.disable.length&&element.parents(settings.disable.join(",")).length}function update(){var counter=0;elements.each(function(){var $this=$(this);if($this.offset().top<=viewHeight&&$this.trigger("appear"),!settings.skip_invisible||$this.is(":visible"))if($.abovethetop(this,settings)||$.leftofbegin(this,settings));else if($.belowthefold(this,settings)||$.rightoffold(this,settings)){if(++counter>settings.failure_limit)return!1}else $this.trigger("appear"),counter=0})}function defineSizes(){elements.each(function(){var imgWidth,imgHeight,$this=$(this);if(!isDisable($this)){var deviceImages=JSON.parse($this.attr("data-"+settings.data_image_array));imgWidth=deviceImages.original.width||!1,imgHeight=deviceImages.original.height||!1,desktopWidth&&deviceImages.desktop&&(imgWidth=deviceImages.desktop.width||imgWidth,imgHeight=deviceImages.desktop.height||imgHeight),mobileWidth&&deviceImages.mobile&&(imgWidth=deviceImages.mobile.width||imgWidth,imgHeight=deviceImages.mobile.height||imgHeight);var proportions=imgWidth/imgHeight;if($this.is("img"))if($this.css("width")){var csswidth=$this.css("width");$this.height(Math.round(parseInt(csswidth)/proportions))}else $this.width(imgWidth),$this.height(imgHeight)}})}var $container,elements=this,viewPort=window.innerWidth,viewHeight=window.innerHeight,settings={mobile_breakpoint:479,desktop_breakpoint:1279,miniTablet_breakpoint:767,threshold:.3*viewHeight,failure_limit:0,event:"scroll",effect:"show",effectspeed:1e3,container:window,data_attribute:"original",data_image_array:"image-array",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",disable:[]},mobileWidth=checkMobile(),desktopWidth=checkDesktop(),retinaValue=checkRetina();return options&&(undefined!==options.failurelimit&&(options.failure_limit=options.failurelimit,delete options.failurelimit),undefined!==options.effectspeed&&(options.effect_speed=options.effectspeed,delete options.effectspeed),$.extend(settings,options)),$container=settings.container===undefined||settings.container===window?$window:$(settings.container),0===settings.event.indexOf("scroll")&&$container.bind(settings.event,function(){return update()}),this.each(function(){var self=this,$self=$(self);self.loaded=!1,$self.attr("src")!==undefined&&$self.attr("src")!==!1||$self.is("img")&&$self.attr("src",settings.placeholder),$self.one("appear",function(){if(!this.loaded){if(settings.appear){var elements_left=elements.length;settings.appear.call(self,elements_left,settings)}$("<img />").bind("load",function(){var deviceImages=JSON.parse($self.attr("data-"+settings.data_image_array)),imgPath=!1;desktopWidth&&(imgPath=!!deviceImages.desktop&&deviceImages.desktop.path),mobileWidth&&(imgPath=!!deviceImages.mobile&&deviceImages.mobile.path,imgPath=retinaValue&&deviceImages.mobile_retina?deviceImages.mobile_retina.path:imgPath),imgPath=imgPath===!1&&retinaValue&&deviceImages.retina?deviceImages.retina.path:imgPath,imgPath=imgPath===!1&&deviceImages.original?deviceImages.original.path:imgPath,$self.attr("data-"+settings.data_attribute,imgPath);var lazyResponsiveImage=$self.attr("data-"+settings.data_attribute);$self.hide(),$self.is("img")?$self.attr("src",lazyResponsiveImage):$self.css("background-image","url('"+lazyResponsiveImage+"')"),$self[settings.effect](settings.effect_speed),self.loaded=!0;var temp=$.grep(elements,function(element){return!element.loaded});if(elements=$(temp),settings.load){var elements_left=elements.length;settings.load.call(self,elements_left,settings)}}).attr("src",$self.attr("data-"+settings.data_attribute))}}),0!==settings.event.indexOf("scroll")&&$self.bind(settings.event,function(){self.loaded||$self.trigger("appear")})}),$window.bind("resize",function(){defineSizes(),update()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&$window.bind("pageshow",function(event){event.originalEvent&&event.originalEvent.persisted&&elements.each(function(){$(this).trigger("appear")})}),$(document).ready(function(){defineSizes(),update()}),this},$.belowthefold=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?(window.innerHeight?window.innerHeight:$window.height())+$window.scrollTop():$(settings.container).offset().top+$(settings.container).height(),fold<=$(element).offset().top-settings.threshold},$.rightoffold=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.width()+$window.scrollLeft():$(settings.container).offset().left+$(settings.container).width(),fold<=$(element).offset().left-settings.threshold},$.abovethetop=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.scrollTop():$(settings.container).offset().top,fold>=$(element).offset().top+settings.threshold+$(element).height()},$.leftofbegin=function(element,settings){var fold;return fold=settings.container===undefined||settings.container===window?$window.scrollLeft():$(settings.container).offset().left,fold>=$(element).offset().left+settings.threshold+$(element).width()},$.inviewport=function(element,settings){return!($.rightoffold(element,settings)||$.leftofbegin(element,settings)||$.belowthefold(element,settings)||$.abovethetop(element,settings))},$.extend($.expr[":"],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0})},"above-the-top":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return $.rightoffold(a,{threshold:0})},"left-of-screen":function(a){return!$.rightoffold(a,{threshold:0})},"in-viewport":function(a){return $.inviewport(a,{threshold:0})},"above-the-fold":function(a){return!$.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return $.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return!$.rightoffold(a,{threshold:0})}})}(jQuery,window,document);