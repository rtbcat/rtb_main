<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
		<meta name="viewport" content="width=device-width, initial-scale=1"> 
		<title>Send Us a Message</title>
		<meta name="description" content="contact rtb.cat" />
		<meta name="keywords" content="contact, rtb, programmatic advertising" />
		<meta name="author" content="rtb.cat" />
		<link rel="shortcut icon" href="../favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/form-component.css" />
		<link rel="stylesheet" type="text/css" href="css/cs-select.css" />
		<link rel="stylesheet" type="text/css" href="css/cs-skin-boxes.css" />
		<link rel="stylesheet" type="text/css" href="css/demo.css" />
		<script src="js/modernizr.custom.js"></script>
		<script src="js/jquery-1.11.3.min.js"></script>
	</head>
	<body>
		<div id="contact_container" class="container">

			<div class="fs-form-wrap" id="fs-form-wrap">
				<div class="fs-title">
					<h1>Contact Us</h1>
				</div>
				<form id="myform" class="fs-form fs-form-full" autocomplete="off">
					<ol class="fs-fields">
						<li>
							<label class="fs-field-label fs-anim-upper" for="q1">What's your name?</label>
							<input class="fs-anim-lower" id="q1" name="name" type="text" placeholder="your name" required/>
						</li>
						<li>
							<label class="fs-field-label fs-anim-upper" for="q2" data-info="We won't send you spam, we promise...">What's your email address?</label>
							<input class="fs-anim-lower" id="q2" name="email" type="email" placeholder="email@domain.us" required/>
						</li>
						<li data-input-trigger>
							<label class="fs-field-label fs-anim-upper" for="q3" data-info="This will help us understand what kind of service you need">Are you a...</label>
							<div class="fs-radio-group fs-radio-custom clearfix fs-anim-lower">
								<span><input id="q3b" name="type" type="radio" value="owner"/><label for="q3b" class="radio-owner">Product Owner</label></span>
								<span><input id="q3c" name="type" type="radio" value="affiliate"/><label for="q3c" class="radio-affiliate">Affiliate</label></span>
							</div>
						</li>
						<li>
							<label class="fs-field-label fs-anim-upper" for="q4">How can we help you?</label>
							<textarea class="fs-anim-lower" id="q4" name="message" placeholder="I would like to scale..."></textarea>
						</li>
					</ol><!-- /fs-fields -->
					<button class="fs-submit" type="submit">Send</button>
				</form><!-- /fs-form -->
			</div><!-- /fs-form-wrap -->

		</div><!-- /container -->
		<div id="message_box" class="window_overlay">
			<div class="overlay_box">
				<div class="message">
					Message here.
				</div>
				<div class="control">
					<button role="ok" type="button">Ok</button>
				</div>
			</div>
		</div>
		<script src="js/classie.js"></script>
		<script src="js/selectFx.js"></script>
		<script src="js/fullscreenForm.js"></script>
		<script>
			(function() {
				var formWrap = document.getElementById( 'fs-form-wrap' );

				[].slice.call( document.querySelectorAll( 'select.cs-select' ) ).forEach( function(el) {	
					new SelectFx( el, {
						stickyPlaceholder: false,
						onChange: function(val){
							document.querySelector('span.cs-placeholder').style.backgroundColor = val;
						}
					});
				} );

				new FForm( formWrap, {
					onReview : function() {
						classie.add( document.body, 'overview' ); // for demo purposes only
					}
				} );
			})();

			var message_box = {
				open : function(message,fx){
					$("#message_box .message").text(message);
					$("#message_box").css("display","block");
					$("#message_box button[role='ok']").unbind().click(fx);
				},
				close : function(){
					$("#message_box").css("display","none");
				}
			}
			$("#myform").submit(function(e){
				e.preventDefault();
				var data = $(this).serialize();
				$("#contact_container").css("opacity","0");
				$.ajax({
					method : 'GET',
					url : 'http://sandbox.lat.com.es/index.php/contact',
					data : data,
					success : function(response){
						var reply = JSON.parse(response);
						if(reply.status == "success"){
							$("#contact_container").css("opacity","1");
							var fx = function(){
								$("#message_box .overlay_box").css("display","none");
								setTimeout(function(){
									top.location = "/";
								},1000);
							}
							message_box.open("Message sent.",fx);
						}
						else{
							var fx = function(){

							}
						}	
					}
				});
			})
		</script>
	</body>
</html>
