;(function(window){'use strict';function classReg(className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)")}var hasClass,addClass,removeClass;if('classList'in document.documentElement){hasClass=function(elem,c){return elem.classList.contains(c)};addClass=function(elem,c){elem.classList.add(c)};removeClass=function(elem,c){elem.classList.remove(c)}}else{hasClass=function(elem,c){return classReg(c).test(elem.className)};addClass=function(elem,c){if(!hasClass(elem,c)){elem.className=elem.className+' '+c}};removeClass=function(elem,c){elem.className=elem.className.replace(classReg(c),' ')}}function toggleClass(elem,c){var fn=hasClass(elem,c)?removeClass:addClass;fn(elem,c)}var classie={hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,has:hasClass,add:addClass,remove:removeClass,toggle:toggleClass};if(typeof define==='function'&&define.amd){define(classie)}else{window.classie=classie}})(window);
;!function(t){"use strict";function e(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t}function s(t,e){var s=document.createElement(t);return e&&(e.cName&&(s.className=e.cName),e.inner&&(s.innerHTML=e.inner),e.appendTo&&e.appendTo.appendChild(s)),s}function i(t,s){this.el=t,this.options=e({},this.options),e(this.options,s),this._init()}var r={animations:Modernizr.cssanimations},n={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},o=n[Modernizr.prefixed("animation")];i.prototype.options={ctrlProgress:!0,ctrlNavDots:!0,ctrlNavPosition:!0,onReview:function(){return!1}},i.prototype._init=function(){this.formEl=this.el.querySelector("form"),this.fieldsList=this.formEl.querySelector("ol.fs-fields"),this.current=0,this.fields=[].slice.call(this.fieldsList.children),this.fieldsCount=this.fields.length,classie.add(this.fields[this.current],"fs-current"),this._addControls(),this._addErrorMsg(),this._initEvents()},i.prototype._addControls=function(){if(this.ctrls=s("div",{cName:"fs-controls",appendTo:this.el}),this.ctrlContinue=s("button",{cName:"fs-continue",inner:"Continue",appendTo:this.ctrls}),this._showCtrl(this.ctrlContinue),this.options.ctrlNavDots){this.ctrlNav=s("nav",{cName:"fs-nav-dots",appendTo:this.ctrls});for(var t="",e=0;e<this.fieldsCount;++e)t+=e===this.current?'<button class="fs-dot-current"></button>':"<button disabled></button>";this.ctrlNav.innerHTML=t,this._showCtrl(this.ctrlNav),this.ctrlNavDots=[].slice.call(this.ctrlNav.children)}this.options.ctrlNavPosition&&(this.ctrlFldStatus=s("span",{cName:"fs-numbers",appendTo:this.ctrls}),this.ctrlFldStatusCurr=s("span",{cName:"fs-number-current",inner:Number(this.current+1)}),this.ctrlFldStatus.appendChild(this.ctrlFldStatusCurr),this.ctrlFldStatusTotal=s("span",{cName:"fs-number-total",inner:this.fieldsCount}),this.ctrlFldStatus.appendChild(this.ctrlFldStatusTotal),this._showCtrl(this.ctrlFldStatus)),this.options.ctrlProgress&&(this.ctrlProgress=s("div",{cName:"fs-progress",appendTo:this.ctrls}),this._showCtrl(this.ctrlProgress))},i.prototype._addErrorMsg=function(){this.msgError=s("span",{cName:"fs-message-error",appendTo:this.el})},i.prototype._initEvents=function(){var t=this;this.ctrlContinue.addEventListener("click",function(){t._nextField()}),this.options.ctrlNavDots&&this.ctrlNavDots.forEach(function(e,s){e.addEventListener("click",function(){t._showField(s)})}),this.fields.forEach(function(e){if(e.hasAttribute("data-input-trigger")){var s=e.querySelector('input[type="radio"]')||e.querySelector("select");if(!s)return;switch(s.tagName.toLowerCase()){case"select":s.addEventListener("change",function(){t._nextField()});break;case"input":[].slice.call(e.querySelectorAll('input[type="radio"]')).forEach(function(e){e.addEventListener("change",function(e){t._nextField()})})}}}),document.addEventListener("keydown",function(e){if(!t.isLastStep&&e.target.tagName.toLowerCase()){var s=e.keyCode||e.which;13===s&&(e.preventDefault(),t._nextField())}})},i.prototype._nextField=function(t){if(this.isLastStep||!this._validade()||this.isAnimating)return!1;this.isAnimating=!0,this.isLastStep=this.current===this.fieldsCount-1&&void 0===t?!0:!1,this._clearError();var e=this.fields[this.current];if(this.navdir=void 0!==t&&t<this.current?"prev":"next",this.current=void 0!==t?t:this.current+1,void 0===t&&(this._progress(),this.farthest=this.current),classie.add(this.fieldsList,"fs-display-"+this.navdir),classie.remove(e,"fs-current"),classie.add(e,"fs-hide"),!this.isLastStep){this._updateNav(),this._updateFieldNumber();var s=this.fields[this.current];classie.add(s,"fs-current"),classie.add(s,"fs-show")}var i=this,n=function(t){r.animations&&this.removeEventListener(o,n),classie.remove(i.fieldsList,"fs-display-"+i.navdir),classie.remove(e,"fs-hide"),i.isLastStep?(i._hideCtrl(i.ctrlNav),i._hideCtrl(i.ctrlProgress),i._hideCtrl(i.ctrlContinue),i._hideCtrl(i.ctrlFldStatus),classie.remove(i.formEl,"fs-form-full"),classie.add(i.formEl,"fs-form-overview"),classie.add(i.formEl,"fs-show"),i.options.onReview()):(classie.remove(s,"fs-show"),i.options.ctrlNavPosition&&(i.ctrlFldStatusCurr.innerHTML=i.ctrlFldStatusNew.innerHTML,i.ctrlFldStatus.removeChild(i.ctrlFldStatusNew),classie.remove(i.ctrlFldStatus,"fs-show-"+i.navdir))),i.isAnimating=!1};r.animations?"next"===this.navdir?this.isLastStep?e.querySelector(".fs-anim-upper").addEventListener(o,n):s.querySelector(".fs-anim-lower").addEventListener(o,n):s.querySelector(".fs-anim-upper").addEventListener(o,n):n()},i.prototype._showField=function(t){return t===this.current||0>t||t>this.fieldsCount-1?!1:void this._nextField(t)},i.prototype._updateFieldNumber=function(){if(this.options.ctrlNavPosition){this.ctrlFldStatusNew=document.createElement("span"),this.ctrlFldStatusNew.className="fs-number-new",this.ctrlFldStatusNew.innerHTML=Number(this.current+1),this.ctrlFldStatus.appendChild(this.ctrlFldStatusNew);var t=this;setTimeout(function(){classie.add(t.ctrlFldStatus,"next"===t.navdir?"fs-show-next":"fs-show-prev")},25)}},i.prototype._progress=function(){this.options.ctrlProgress&&(this.ctrlProgress.style.width=this.current*(100/this.fieldsCount)+"%")},i.prototype._updateNav=function(){this.options.ctrlNavDots&&(classie.remove(this.ctrlNav.querySelector("button.fs-dot-current"),"fs-dot-current"),classie.add(this.ctrlNavDots[this.current],"fs-dot-current"),this.ctrlNavDots[this.current].disabled=!1)},i.prototype._showCtrl=function(t){classie.add(t,"fs-show")},i.prototype._hideCtrl=function(t){classie.remove(t,"fs-show")},i.prototype._validade=function(){var t,e=this.fields[this.current],s=e.querySelector("input[required]")||e.querySelector("textarea[required]")||e.querySelector("select[required]");if(!s)return!0;switch(s.tagName.toLowerCase()){case"input":if("email"==s.type){var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;i.test(s.value)?classie.remove(s,"errored"):(t="INVALIDEMAIL",classie.add(s,"errored"))}else""==s.value?(t="NOVAL",classie.add(s,"errored")):s.value.length<2?(t="TOOSHORT",classie.add(s,"errored")):classie.remove(s,"errored");break;case"textarea":""==s.value?(t="NOVAL",classie.add(s,"errored")):s.value.length<5?(t="TOOSHORT",classie.add(s,"errored")):classie.remove(s,"errored")}return void 0!=t?(this._showError(t),!1):!0},i.prototype._showError=function(t){var e="";switch(t){case"NOVAL":e="Please fill the field before continuing";break;case"INVALIDEMAIL":e="Please fill a valid email address";break;case"TOOSHORT":e="Value is too short"}this.msgError.innerHTML=e,this._showCtrl(this.msgError)},i.prototype._clearError=function(){this._hideCtrl(this.msgError)},t.FForm=i}(window);